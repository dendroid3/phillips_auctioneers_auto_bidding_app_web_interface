import{d as D,c as y,o as r,n as S,u as t,r as Y,a as z,b as o,w as l,e as b,f as n,g as H,h as A,F as j,i as K,j as N,t as $,k as ie,l as _,m as ne,p as oe,q as ue,s as he,v as xe}from"./app-C3fIfT_E.js";import{c as Z,_ as E,u as Q,a as we}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CL4hBmRi.js";import{_ as W,a as X,b as ee,c as O,d as T,e as te,f as C,g as re,h as de,i as ce,j as me,k as ge,l as U}from"./dayjs.min-D7PDN_2m.js";import{_ as $e,a as ae}from"./Label.vue_vue_type_script_setup_true_lang-OInop0t6.js";import{_ as fe,a as ve,b as be,c as ke,d as Ve,e as Se,f as pe}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-Cqsa_SkW.js";import{g as Ae}from"./echo-ClkwrYP1.js";import{_ as Ce}from"./AppLayout.vue_vue_type_script_setup_true_lang-W-fchXaC.js";import"./useForwardExpose-Ddjjyw5O.js";import"./RovingFocusGroup-CUD5wt1q.js";const L=D({__name:"CardDescription",props:{class:{}},setup(e){const w=e;return(u,c)=>(r(),y("p",{"data-slot":"card-description",class:S(t(Z)("text-muted-foreground text-sm",w.class))},[Y(u.$slots,"default")],2))}}),Ie={class:"flex flex-col space-y-2"},Te={class:"relative"},ze=["disabled","value"],Be={class:"relative"},De=["value"],Me={class:"flex flex-col space-y-2"},Ne={class:"relative"},qe=["value"],Pe={class:"relative"},Ee=["value"],Fe={class:"flex flex-col space-y-2"},je={class:"relative"},Oe=["value"],Ue={class:"relative"},Ke=["value"],He={class:"flex flex-row space-x-2"},Le={class:"relative"},Re=["disabled","value"],Ye={class:"relative"},Ze=["value"],Ge={class:"flex flex-row space-x-2"},Je={class:"relative"},Qe=["value"],We={class:"relative"},Xe=["value"],et={class:"flex flex-row space-x-2"},tt={class:"relative"},st=["value"],at={class:"relative"},lt=["value"],it=D({__name:"AuctionStagesConfigurationTable",props:{stages:{type:Object,required:!0,default:()=>({lazy_stage:{start_time:"",end_time:"",status:""},aggressive_stage:{start_time:"",end_time:"",stage:""},sniping_stage:{start_time:"",end_time:"",stage:""}}),validator:e=>["lazy_stage","aggressive_stage","sniping_stage"].every(w=>e[w])},isAuctionConfigurable:{type:Boolean,required:!0,default:!1}},emits:["update:time","save:time"],setup(e,{emit:w}){const u=w,c=z(!1);function h(g){const a=g.split(":");let s=Number(a[0]),m=Number(a[1]),d=a.length>2?Number(a[2]):0;return d+=1,d>59&&(d=0,m+=1),m>59&&(m=0,s+=1),s>23&&(s=0),[String(s).padStart(2,"0"),String(m).padStart(2,"0"),String(d).padStart(2,"0")].join(":")}const x=(g,a)=>{const s=v=>{const[p,V,I=0]=v.split(":").map(Number);return p*3600+V*60+I};let m=!0;if(a==="lazy_stage.start_time"){const v=s(g);(v<s("10:00:00")||v>s("12:30:00"))&&(m=!1,alert("Lazy stage must end between 11:15 AM and 12:45 PM"),v<s("10:00:00")?(g="11:15:00",m=!0):v>s("12:30:00")&&(g="12:30:00",m=!0))}if(a==="lazy_stage.end_time"){const v=s(g);(v<s("11:15:00")||v>s("12:45:00"))&&(m=!1,alert("Lazy stage must end between 11:15 AM and 12:45 PM"),v<s("11:15:00")?(g="11:15:00",m=!0):v>s("12:45:00")&&(g="12:45:00",m=!0))}if(a==="aggressive_stage.end_time"&&s(g)>s("12:57:00")&&(m=!1,alert("Aggressive stage cannot end after 12:57 PM"),g="12:57:00",m=!0),!m)return;c.value=!0;const[d,i]=a.split("."),f=d.replace("_stage","");u("update:time",{stageName:f,field:i,value:g}),setTimeout(()=>{switch(a){case"lazy_stage.end_time":u("update:time",{stageName:"aggressive",field:"start_time",value:h(g)});break;case"aggressive_stage.end_time":u("update:time",{stageName:"sniping",field:"start_time",value:h(g)});break}},0)},k=()=>{u("save:time"),console.log("Should emit")};return(g,a)=>(r(),y("div",null,[o(t(W),{class:"hidden md:block"},{default:l(()=>[o(t(X),null,{default:l(()=>[o(t(E),{class:"mx-4 cursor-pointer bg-green-500 text-white",disabled:!c.value,onClick:k},{default:l(()=>a[20]||(a[20]=[b(" Save ")])),_:1},8,["disabled"])]),_:1}),o(t(ee),null,{default:l(()=>[o(t(O),null,{default:l(()=>[o(t(T),null,{default:l(()=>a[21]||(a[21]=[b("Lazy Stage")])),_:1}),o(t(T),null,{default:l(()=>a[22]||(a[22]=[b("Aggressive Stage")])),_:1}),o(t(T),null,{default:l(()=>a[23]||(a[23]=[b("Sniping Stage")])),_:1})]),_:1})]),_:1}),o(t(te),null,{default:l(()=>[o(t(O),null,{default:l(()=>[o(t(C),null,{default:l(()=>[n("div",Ie,[n("div",Te,[n("input",{disabled:!e.isAuctionConfigurable,class:S([e.isAuctionConfigurable?"":"bg-yellow-900","w-35 rounded-md border border-gray-300 px-2 py-1 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500"]),type:"time",value:e.stages.lazy_stage.start_time,onInput:a[0]||(a[0]=s=>x(s.target.value,"lazy_stage.start_time")),onFocus:a[1]||(a[1]=s=>s.target.showPicker())},null,42,ze)]),n("div",Be,[n("input",{disabled:"",type:"time",value:e.stages.lazy_stage.end_time,onInput:a[2]||(a[2]=s=>x(s.target.value,"lazy_stage.end_time")),onFocus:a[3]||(a[3]=s=>s.target.showPicker()),class:"w-35 rounded-md border border-gray-300 bg-yellow-900 px-2 py-1 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500"},null,40,De)])])]),_:1}),o(t(C),null,{default:l(()=>[n("div",Me,[n("div",Ne,[n("input",{type:"time",value:e.stages.aggressive_stage.start_time,onInput:a[4]||(a[4]=s=>x(s.target.value,"aggressive_stage.start_time")),onFocus:a[5]||(a[5]=s=>s.target.showPicker()),disabled:"",class:"w-35 rounded-md border border-gray-300 bg-yellow-900 px-2 py-1 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500"},null,40,qe)]),n("div",Pe,[n("input",{type:"time",value:e.stages.aggressive_stage.end_time,disabled:"",class:"w-35 rounded-md border border-gray-300 bg-yellow-900 px-2 py-1 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500"},null,8,Ee)])])]),_:1}),o(t(C),null,{default:l(()=>[n("div",Fe,[n("div",je,[n("input",{type:"time",value:e.stages.sniping_stage.start_time,onInput:a[6]||(a[6]=s=>x(s.target.value,"sniping_stage.start_time")),disabled:"",onFocus:a[7]||(a[7]=s=>s.target.showPicker()),class:"w-35 rounded-md border border-gray-300 bg-yellow-900 px-2 py-1 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500"},null,40,Oe)]),n("div",Ue,[n("input",{type:"time",value:e.stages.sniping_stage.end_time,onInput:a[8]||(a[8]=s=>x(s.target.value,"sniping_stage.end_time")),onFocus:a[9]||(a[9]=s=>s.target.showPicker()),disabled:"",class:"w-35 rounded-md border border-gray-300 bg-yellow-900 px-2 py-1 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500"},null,40,Ke)])])]),_:1})]),_:1})]),_:1})]),_:1}),o(t(re),{class:"block md:hidden"},{default:l(()=>[o(t(de),null,{default:l(()=>[o(t(ce),null,{default:l(()=>a[24]||(a[24]=[b("Bid Stages ")])),_:1}),o(t(L),null,{default:l(()=>a[25]||(a[25]=[b("Configure Bid Stage Times.")])),_:1})]),_:1}),o(t(me),null,{default:l(()=>[o(t(L),null,{default:l(()=>a[26]||(a[26]=[b("Lazy Stage")])),_:1}),n("div",He,[n("div",Le,[n("input",{disabled:!e.isAuctionConfigurable,class:S([e.isAuctionConfigurable?"":"bg-yellow-900","w-35 rounded-md border border-gray-300 px-2 py-1 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500"]),type:"time",value:e.stages.lazy_stage.start_time,onInput:a[10]||(a[10]=s=>x(s.target.value,"lazy_stage.start_time")),onFocus:a[11]||(a[11]=s=>s.target.showPicker())},null,42,Re)]),n("div",Ye,[n("input",{disabled:"",type:"time",value:e.stages.lazy_stage.end_time,onInput:a[12]||(a[12]=s=>x(s.target.value,"lazy_stage.end_time")),onFocus:a[13]||(a[13]=s=>s.target.showPicker()),class:"w-35 rounded-md border border-gray-300 bg-yellow-900 px-2 py-1 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500"},null,40,Ze)])]),o(t(L),{class:"mt-3"},{default:l(()=>a[27]||(a[27]=[b("Aggressive Stage")])),_:1}),n("div",Ge,[n("div",Je,[n("input",{type:"time",value:e.stages.aggressive_stage.start_time,onInput:a[14]||(a[14]=s=>x(s.target.value,"aggressive_stage.start_time")),onFocus:a[15]||(a[15]=s=>s.target.showPicker()),disabled:"",class:"w-35 rounded-md border border-gray-300 bg-yellow-900 px-2 py-1 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500"},null,40,Qe)]),n("div",We,[n("input",{type:"time",value:e.stages.aggressive_stage.end_time,disabled:"",class:"w-35 rounded-md border border-gray-300 bg-yellow-900 px-2 py-1 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500"},null,8,Xe)])]),o(t(L),{class:"mt-3"},{default:l(()=>a[28]||(a[28]=[b("Sniping Stage")])),_:1}),n("div",et,[n("div",tt,[n("input",{type:"time",value:e.stages.sniping_stage.start_time,onInput:a[16]||(a[16]=s=>x(s.target.value,"sniping_stage.start_time")),disabled:"",onFocus:a[17]||(a[17]=s=>s.target.showPicker()),class:"w-35 rounded-md border border-gray-300 bg-yellow-900 px-2 py-1 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500"},null,40,st)]),n("div",at,[n("input",{type:"time",value:e.stages.sniping_stage.end_time,onInput:a[18]||(a[18]=s=>x(s.target.value,"sniping_stage.end_time")),onFocus:a[19]||(a[19]=s=>s.target.showPicker()),disabled:"",class:"w-35 rounded-md border border-gray-300 bg-yellow-900 px-2 py-1 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500"},null,40,lt)])])]),_:1}),o(t(ge),{class:"flex justify-center px-6 pb-2 pt-3"},{default:l(()=>[o(t(E),{class:"mx-4 cursor-pointer bg-green-500 text-white",disabled:!c.value,onClick:k},{default:l(()=>a[29]||(a[29]=[b(" Save ")])),_:1},8,["disabled"])]),_:1})]),_:1})]))}}),nt={class:"space-y-4"},ot={class:"flex justify-center"},ut=D({__name:"InitiatizationPopover",props:{phillips_accounts_emails:{type:Array,required:!0,default:()=>[]},auction_id:{type:Number,required:!0,default:()=>1},auction_status:{type:String,required:!0,default:()=>"unconfigured"}},emits:["intialization:started"],setup(e,{emit:w}){const u=e,c=w,h=z([]);H(()=>{h.value=u.phillips_accounts_emails.map(g=>({email:g,email_app_password:"",phillips_account_password:""})),console.log(h.value)});const x=z(),k=async()=>{const g={accounts:h.value,auction_session_id:u.auction_id},a=await N.post("/api/auction/initialize",g);console.log(g),c("initialization:started",a.data),console.log(a.data),x.value=!1};return(g,a)=>(r(),A(t(pe),{open:x.value,"onUpdate:open":a[0]||(a[0]=s=>x.value=s)},{default:l(()=>[o(t(fe),{"as-child":""},{default:l(()=>[o(t(E),{class:"mx-4 cursor-pointer bg-green-500 text-white",disabled:e.auction_status!="unconfigurable"},{default:l(()=>a[1]||(a[1]=[b(" Initialize Bidding Session ")])),_:1},8,["disabled"])]),_:1}),o(t(ve),{class:"sm:max-w-[925px]"},{default:l(()=>[o(t(be),null,{default:l(()=>[o(t(ke),null,{default:l(()=>a[2]||(a[2]=[b("Phillips Accounts Email ")])),_:1}),o(t(Ve),null,{default:l(()=>a[3]||(a[3]=[b(" Enter Passwords for the phillips accounts you want used in this auction session ")])),_:1})]),_:1}),n("div",nt,[(r(!0),y(j,null,K(h.value,(s,m)=>(r(),y("div",{key:m,class:"flex flex-col md:grid md:grid-cols-11 md:gap-2"},[o(t($e),{for:`${m}-${s}`,class:"mb-1 md:col-span-3 md:mb-0"},{default:l(()=>[b($(s.email),1)]),_:2},1032,["for"]),o(t(ae),{id:`phillips_account_password_${m}`,type:"text",class:"mb-2 h-8 md:col-span-4 md:mb-0",modelValue:h.value[m].phillips_account_password,"onUpdate:modelValue":d=>h.value[m].phillips_account_password=d,placeholder:"Account Password"},null,8,["id","modelValue","onUpdate:modelValue"]),o(t(ae),{id:`email_app_password_${m}`,type:"text",class:"h-8 md:col-span-4",modelValue:h.value[m].email_app_password,"onUpdate:modelValue":d=>h.value[m].email_app_password=d,placeholder:"Email Password"},null,8,["id","modelValue","onUpdate:modelValue"])]))),128))]),o(t(Se),null,{default:l(()=>[n("div",ot,[o(t(E),{class:"cursor-pointer bg-green-500 text-white",onClick:k},{default:l(()=>a[4]||(a[4]=[b(" Initialize ")])),_:1})])]),_:1})]),_:1})]),_:1},8,["open"]))}}),rt={class:"flex"},dt={class:"text-sm"},ct=["value","min","max"],mt={class:"text-sm"},gt=D({__name:"Progress",props:{stage:{type:String,required:!1},startTime:{type:String,required:!0},endTime:{type:String,required:!0},name:{type:String,required:!1}},setup(e){const w=e;let u;const c=d=>{const[i,f="00"]=d==null?void 0:d.split(":");return parseInt(i+f)};var h=z(1100),x=z(1200),k=z(1300);const g=()=>{const d=new Date,i=d.getHours().toString().padStart(2,"0"),f=d.getMinutes().toString().padStart(2,"0"),v=d.getSeconds().toString().padStart(2,"0"),p=`${i}:${f}:${v}`;h.value=c(w.startTime),x.value=c(p),k.value=c(w.endTime)},a=z(""),s=()=>{const d=new Date,[i,f,v]=w.endTime.split(":").map(Number),p=new Date;p.setHours(i,f,v,0);const V=p-d;if(V<=0){a.value="00:00:00";return}const I=Math.floor(V/1e3),M=Math.floor(I/3600),q=Math.floor(I%3600/60),P=I%60,B=F=>F.toString().padStart(2,"0");a.value=`${B(M)}:${B(q)}:${B(P)}`};let m=null;return H(()=>{u=setInterval(g,3e3),s(),m=setInterval(s,1e3)}),ie(()=>{clearInterval(u),clearInterval(m)}),(d,i)=>(r(),y("div",rt,[n("span",dt,$(w.startTime),1),n("input",{type:"range",value:t(x),min:t(h),max:t(k),disabled:"",class:"accent-green-500"},null,8,ct),n("span",mt,$(w.endTime),1),i[0]||(i[0]=n("br",null,null,-1)),n("div",{class:S(["fixed top-0 right-0 z-50 rounded p-1 text-center font-mono text-2xl",w.stage=="lazy"?"bg-green-500":w.stage=="aggressive"?"bg-amber-500":w.stage=="sniping"?"bg-red-500":"hidden"])},$(a.value),3)]))}});var R={exports:{}},ft=R.exports,le;function vt(){return le||(le=1,function(e,w){(function(u,c){e.exports=c()})(ft,function(){return function(u,c,h){u=u||{};var x=c.prototype,k={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function g(s,m,d,i){return x.fromToBase(s,m,d,i)}h.en.relativeTime=k,x.fromToBase=function(s,m,d,i,f){for(var v,p,V,I=d.$locale().relativeTime||k,M=u.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],q=M.length,P=0;P<q;P+=1){var B=M[P];B.d&&(v=i?h(s).diff(d,B.d,!0):d.diff(s,B.d,!0));var F=(u.rounding||Math.round)(Math.abs(v));if(V=v>0,F<=B.r||!B.r){F<=1&&P>0&&(B=M[P-1]);var G=I[B.l];f&&(F=f(""+F)),p=typeof G=="string"?G.replace("%d",F):G(F,m,B.l,V);break}}if(m)return p;var J=V?I.future:I.past;return typeof J=="function"?J(p):J.replace("%s",p)},x.to=function(s,m){return g(s,m,this,!0)},x.from=function(s,m){return g(s,m,this)};var a=function(s){return s.$u?h.utc():h()};x.toNow=function(s){return this.to(a(this),s)},x.fromNow=function(s){return this.from(a(this),s)}}})}(R)),R.exports}var bt=vt();const se=Ae(bt),pt={class:"border-sidebar-border/70 dark:border-sidebar-border mt-4 flex-1 rounded-xl border"},ye=D({__name:"BidsTable",props:{vehicleId:{type:String,required:!1},isPopover:{type:Boolean,required:!1,default:()=>!1}},setup(e){const{formatKES:w}=Q();U.extend(se);let u;const c=m=>{const d=U(m);return d.isValid()?d.format("HH:mm:ss"):"Invalid date"},h=e;let x=z([]),k=z(!1);const g=async()=>{try{const v=window.location.pathname.split("/")[2].replaceAll("-"," ").split(" ");v[2]=`${v[2]},`;const p=v.join(" "),V=await N.get(`/api/bid/get_all_for_auction/${p}`);x.value={...V.data,bids:V.data.vehicles||[]},k=!0}catch(m){console.log(m)}},a=async()=>{try{const m={vehicle_id:h.vehicleId},d=await N.post("/api/vehicle/bids",m);console.log(d.data),x.value={...d.data,bids:d.data.vehicles||[]},k=!0}catch(m){console.log(m)}};H(()=>{setTimeout(()=>{h.vehicleId?(a(),u=setInterval(a,3e3)):(g(),u=setInterval(g,3e3))},0)}),ie(()=>clearInterval(u));const s=m=>m?`${m[0].toUpperCase()}${m.slice(1)}`:"";return(m,d)=>(r(),y("div",pt,[o(t(W),{class:"w-full table-auto"},{default:l(()=>[o(t(X),null,{default:l(()=>d[0]||(d[0]=[b("Bid History on this Vehicle")])),_:1}),o(t(ee),{class:"sticky top-0"},{default:l(()=>[o(t(O),null,{default:l(()=>[o(t(T),null,{default:l(()=>d[1]||(d[1]=[b("Time")])),_:1}),e.isPopover?_("",!0):(r(),A(t(T),{key:0},{default:l(()=>d[2]||(d[2]=[b("Name/ID")])),_:1})),o(t(T),{class:"hidden md:table-cell"},{default:l(()=>d[3]||(d[3]=[b("Account")])),_:1}),o(t(T),{class:"hidden md:table-cell"},{default:l(()=>d[4]||(d[4]=[b("Stage")])),_:1}),o(t(T),null,{default:l(()=>d[5]||(d[5]=[b("Status")])),_:1}),o(t(T),null,{default:l(()=>d[6]||(d[6]=[b("Amount")])),_:1})]),_:1})]),_:1}),t(x)?(r(),A(t(te),{key:0},{default:l(()=>[(r(!0),y(j,null,K(t(x),(i,f)=>(r(),A(t(O),{key:f,class:S({"text-green-500":["highest","Highest"].includes(i.status),"text-red-500":["Toppled","toppled","Outbudgeted","outbudgeted"].includes(i.status),"text-amber-500":!["highest","Highest","Toppled","toppled","Outbudgeted","outbudgeted"].includes(i.status)})},{default:l(()=>[i.status?(r(),A(t(C),{key:0,class:S(["border-l-4",i.status==="highest"||i.status==="Highest"?"border-green-500":["Toppled","toppled","Outbudgeted","outbudgeted","Outbudged"].includes(i.status)?"border-red-500":"border-amber-500"])},{default:l(()=>[b($(c(i.created_at)),1)]),_:2},1032,["class"])):_("",!0),i.status&&!e.isPopover?(r(),A(t(C),{key:1},{default:l(()=>{var v;return[b($((v=i==null?void 0:i.vehicle)==null?void 0:v.phillips_vehicle_id),1)]}),_:2},1024)):_("",!0),i.status?(r(),A(t(C),{key:2,class:"hidden md:table-cell"},{default:l(()=>{var v;return[b($((v=i==null?void 0:i.phillips_account)==null?void 0:v.email),1)]}),_:2},1024)):_("",!0),i.status?(r(),A(t(C),{key:3,class:"hidden md:table-cell"},{default:l(()=>{var v;return[b($(s((v=i==null?void 0:i.bid_stage)==null?void 0:v.name)),1)]}),_:2},1024)):_("",!0),i.status?(r(),A(t(C),{key:4},{default:l(()=>[b($(s(i.status)),1)]),_:2},1024)):_("",!0),i.status?(r(),A(t(C),{key:5},{default:l(()=>[b($(t(w)(i.amount)),1)]),_:2},1024)):_("",!0)]),_:2},1032,["class"]))),128))]),_:1})):_("",!0)]),_:1})]))}}),yt={class:"overflow-y-auto max-h-[640px] scrollbar-hide"},_e=D({__name:"BidsPopover",props:{vehicleId:{type:String,required:!0}},setup(e){const w=e;return(u,c)=>{const h=ne("DialogTitle");return r(),A(t(pe),null,{default:l(()=>[o(t(fe),{"as-child":""},{default:l(()=>[o(t(E),{class:"cursor-pointer bg-green-500 text-white"},{default:l(()=>c[0]||(c[0]=[b("View")])),_:1})]),_:1}),o(t(ve),{class:"sm:max-w-[925px] max-h-[700px] overflow-hidden"},{default:l(()=>[o(t(be),{class:"border-b pb-2"},{default:l(()=>[o(h,{class:"text-center"},{default:l(()=>[b($(`BIDS FOR ${w.vehicleId}`),1)]),_:1})]),_:1}),n("div",yt,[o(ye,{vehicleId:w.vehicleId,isPopover:!0},null,8,["vehicleId"])])]),_:1})]),_:1})}}}),_t={key:0,class:"absolute top-0 right-0 translate-x-1/2 -translate-y-1/2 transform"},ht={class:"relative"},xt={class:"mb-2 w-30 text-center"},wt=["value"],$t={class:"relative"},kt={class:"mb-2 w-30 text-center"},Vt=["value"],St={class:"flex"},At={key:0},Ct={class:"flex flex-col space-y-2"},It={class:"relative"},Tt={class:"mb-2 w-30 text-center"},zt=["value"],Bt={class:"flex flex-col space-y-2"},Dt={class:"relative"},Mt={class:"mb-2 w-30 text-center"},Nt=["value"],qt={class:"flex flex-col space-y-2"},Pt={class:"relative"},Et={class:"mb-2 w-30 text-center"},Ft=["value"],jt={key:0},Ot={key:1,class:"flex"},Ut={key:1},Kt={key:2},Ht={key:4},Lt={key:5},Rt=D({__name:"VehicleRow",props:{modelValue:{type:Object,required:!0,default:()=>({id:"Example Vehicle",start_amount:"35000",maximum_amount:"250000",current_bid:"125600",last_bid_time:"2025-05-31 16:18:48",status:"Unconfigured",lazy_stage:{start_time:"10:00:00",end_time:"12:00:00",increment:"3000",status:"active"},aggressive_stage:{start_time:"12:00:01",end_time:"12:55:00",increment:"5000",stage:"dormant"},sniping_stage:{start_time:"12:55:01",end_time:"13:00:00",increment:"10000",stage:"dormant"}})},index:{type:Number,required:!0,default:()=>0},isAuctionConfigurable:{type:Boolean,required:!0,default:()=>!1}},emits:["update:modelValue","update:vehicle-in-db","vehicle-saved"],setup(e,{emit:w}){const{formatKES:u}=Q(),c=e;U.extend(se);const h=oe(()=>{const i=U(c.modelValue.last_bid_time);return i.isValid()?i.fromNow():"Invalid date"}),x=async i=>{confirm(`Are you sure you want to drop ${i} off the auction? You can bring it back later.`)&&(await N.post("/api/vehicle/drop",{id:i}),k("vehicle-saved"))},k=w,g=z(!1),a=(i,f)=>{g.value=!0;const v={...c.modelValue},p=c.index;v[f]=String(i),k("update:modelValue",v,p)},s=i=>{["Backspace","Delete","Tab","Escape","Enter","."].includes(i.key)||i.key==="a"&&i.ctrlKey||i.key==="c"&&i.ctrlKey||i.key==="v"&&i.ctrlKey||i.key==="x"&&i.ctrlKey||isNaN(Number(i.key))&&i.preventDefault()};ue("parent");let m=z(!1);const d=async()=>{try{console.log(c.modelValue.start_amount),console.log(c.modelValue.maximum_amount),m=!0;const i=await N.put("/api/vehicle/update",c.modelValue);g.value=!1,k("vehicle-saved"),console.log("Save successful"),m=!1}catch(i){console.error("Save failed",i)}};return(i,f)=>(r(),A(t(O),null,{default:l(()=>[o(t(C),{class:S(["group relative w-30 cursor-pointer border-l-4 font-medium",e.modelValue.status=="highest"||e.modelValue.status=="active"?"border-green-500":e.modelValue.status=="outbidded"?"border-amber-500":"border-red-500"])},{default:l(()=>[e.modelValue.status==="Highest"?(r(),y("div",_t,f[6]||(f[6]=[n("div",{class:"relative"},[n("div",{class:"z-10 flex h-4 w-4 items-center justify-center rounded-full bg-green-500"},[n("span",{class:"text-[10px] font-bold text-white"},"!")]),n("div",{class:"absolute inset-0 animate-ping rounded-full bg-green-500 opacity-75"})],-1)]))):_("",!0),b(" "+$(e.modelValue.id),1)]),_:1},8,["class"]),o(t(C),null,{default:l(()=>[n("div",ht,[n("div",xt,$(t(u)(e.modelValue.start_amount)),1),e.isAuctionConfigurable?(r(),y("input",{key:0,type:"number",onKeydown:s,value:e.modelValue.start_amount,onInput:f[0]||(f[0]=v=>a(v.target.value,"start_amount")),placeholder:"4,000",class:"w-30 rounded-md border border-gray-300 px-2 py-1 pl-7 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500"},null,40,wt)):_("",!0)])]),_:1}),o(t(C),null,{default:l(()=>[n("div",$t,[n("div",kt,$(t(u)(e.modelValue.maximum_amount)),1),e.isAuctionConfigurable?(r(),y("input",{key:0,type:"number",onKeydown:s,value:e.modelValue.maximum_amount,onInput:f[1]||(f[1]=v=>a(v.target.value,"maximum_amount")),placeholder:"4,000",class:"w-35 rounded-md border border-gray-300 px-2 py-1 pl-7 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500"},null,40,Vt)):_("",!0)])]),_:1}),e.isAuctionConfigurable?_("",!0):(r(),A(t(C),{key:0},{default:l(()=>[b($(e.modelValue.bids.length),1)]),_:1})),o(t(C),{class:"cursor-pointer"},{default:l(()=>[n("div",St,[n("p",{class:S(e.modelValue.current_bid_status=="Highest"||e.modelValue.current_bid_status=="highest"?"text-green-500":e.modelValue.current_bid_status=="Outbidded"||e.modelValue.current_bid_status=="outbidded"?"text-amber-500":"text-red-500")},$(e.modelValue.current_bid<1||e.modelValue.bids.length<1?"None ":t(u)(e.modelValue.current_bid)),3),e.modelValue.current_bid_status?(r(),y("p",{key:0,class:S(["ml-1",e.modelValue.current_bid_status=="Highest"||e.modelValue.current_bid_status=="highest"?"text-green-500":e.modelValue.current_bid_status=="Outbidded"||e.modelValue.current_bid_status=="outbidded"?"text-amber-500":"text-red-500"])},$(`(${e.modelValue.current_bid_status})`),3)):_("",!0)]),e.isAuctionConfigurable?(r(),y("div",At,[n("div",{class:S(["mt-4 flex",e.modelValue.current_bid_status=="Highest"||e.modelValue.current_bid_status=="highest"?"text-green-500":e.modelValue.current_bid_status=="Outbidded"||e.modelValue.current_bid_status=="outbidded"?"text-amber-500":"text-red-500"])},[f[7]||(f[7]=n("div",{class:"mr-2"},[n("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[n("circle",{cx:"12",cy:"12",r:"9"}),n("path",{d:"M12 7v5l3 3"})])],-1)),b(" "+$(h.value),1)],2)])):_("",!0)]),_:1}),o(t(C),{class:S(e.modelValue.status=="highest"||e.modelValue.status=="active"?"text-green-500":e.modelValue.status=="Outbidded"?"text-amber-500":"text-red-500")},{default:l(()=>[b($(e.modelValue.status),1)]),_:1},8,["class"]),o(t(C),null,{default:l(()=>[n("div",Ct,[n("div",It,[n("div",Tt,$(t(u)(e.modelValue.lazy_stage_increment)),1),e.isAuctionConfigurable?(r(),y("input",{key:0,class:S([e.isAuctionConfigurable?"":"bg-yellow-900","w-35 rounded-md border border-gray-300 px-2 py-1 pl-10 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500"]),type:"number",onKeydown:s,value:e.modelValue.lazy_stage_increment,onInput:f[2]||(f[2]=v=>a(v.target.value,"lazy_stage_increment")),placeholder:"4,000"},null,42,zt)):_("",!0)])])]),_:1}),o(t(C),null,{default:l(()=>[n("div",Bt,[n("div",Dt,[n("div",Mt,$(t(u)(e.modelValue.aggressive_stage_increment)),1),e.isAuctionConfigurable?(r(),y("input",{key:0,class:S([e.isAuctionConfigurable?"":"bg-yellow-900","w-35 rounded-md border border-gray-300 px-2 py-1 pl-10 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500"]),type:"number",value:e.modelValue.aggressive_stage_increment,onInput:f[3]||(f[3]=v=>a(v.target.value,"aggressive_stage_increment")),placeholder:"4,000"},null,42,Nt)):_("",!0)])])]),_:1}),o(t(C),null,{default:l(()=>[n("div",qt,[n("div",Pt,[n("div",Et,$(t(u)(e.modelValue.sniping_stage_increment)),1),e.isAuctionConfigurable?(r(),y("input",{key:0,class:S([e.isAuctionConfigurable?"":"bg-yellow-900","w-35 rounded-md border border-gray-300 px-2 py-1 pl-10 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500"]),type:"number",onKeydown:s,value:e.modelValue.sniping_stage_increment,onInput:f[4]||(f[4]=v=>a(v.target.value,"sniping_stage_increment")),placeholder:"4,000"},null,42,Ft)):_("",!0)])])]),_:1}),o(t(C),null,{default:l(()=>[e.isAuctionConfigurable?(r(),A(t(E),{key:0,class:S(["cursor-pointer",g.value&&e.modelValue.status!="active"?"bg-green-500":""]),onClick:d},{default:l(()=>[t(m)?(r(),y("div",Ot,f[8]||(f[8]=[n("svg",{class:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[n("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),n("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),n("span",null,"Saving",-1)]))):(r(),y("div",jt,"Save"))]),_:1},8,["class"])):_("",!0),e.isAuctionConfigurable?(r(),y("br",Ut)):_("",!0),e.isAuctionConfigurable?(r(),y("br",Kt)):_("",!0),e.isAuctionConfigurable?(r(),A(t(E),{key:3,class:"cursor-pointer bg-red-500 text-white",onClick:f[5]||(f[5]=v=>x(e.modelValue.id))},{default:l(()=>f[9]||(f[9]=[b(" Drop Off ")])),_:1})):_("",!0),e.isAuctionConfigurable?(r(),y("br",Ht)):_("",!0),e.isAuctionConfigurable?(r(),y("br",Lt)):_("",!0),o(_e,{vehicleName:e.modelValue.name,vehicleId:e.modelValue.id},null,8,["vehicleName","vehicleId"])]),_:1})]),_:1}))}}),Yt={class:"relative w-full p-2"},Zt={class:"mb-2 w-full text-center"},Gt=["value"],Jt={class:"relative w-full p-2"},Qt={class:"mb-2 w-full text-center"},Wt=["value"],Xt={class:"w-full p-2 text-center"},es={class:"relative w-full p-2"},ts={class:"mb-2 w-full text-center"},ss=["value"],as={class:"relative w-full p-2"},ls={class:"mb-2 w-full text-center"},is=["value"],ns={class:"relative w-full p-2"},os={class:"mb-2 w-full text-center"},us=["value"],rs={key:0},ds={key:1,class:"flex"},cs=D({__name:"VehicleCard",props:{modelValue:{type:Object,required:!0,default:()=>({id:"Example Vehicle",start_amount:"35000",maximum_amount:"250000",current_bid:"125600",last_bid_time:"2025-05-31 16:18:48",status:"Unconfigured",lazy_stage:{start_time:"10:00:00",end_time:"12:00:00",increment:"3000",status:"active"},aggressive_stage:{start_time:"12:00:01",end_time:"12:55:00",increment:"5000",stage:"dormant"},sniping_stage:{start_time:"12:55:01",end_time:"13:00:00",increment:"10000",stage:"dormant"}})},index:{type:Number,required:!0,default:()=>0},isAuctionConfigurable:{type:Boolean,required:!0,default:()=>!1}},emits:["update:modelValue","update:vehicle-in-db","vehicle-saved"],setup(e,{emit:w}){const{formatKES:u}=Q(),c=e;U.extend(se);const h=oe(()=>{const i=U(c.modelValue.last_bid_time);return i.isValid()?i.fromNow():"Invalid date"}),x=async i=>{confirm(`Are you sure you want to drop ${i} off the auction? You can bring it back later.`)&&(await N.post("/api/vehicle/drop",{id:i}),k("vehicle-saved"))},k=w,g=z(!1),a=(i,f)=>{g.value=!0;const v={...c.modelValue},p=c.index;v[f]=String(i),k("update:modelValue",v,p)},s=i=>{["Backspace","Delete","Tab","Escape","Enter","."].includes(i.key)||i.key==="a"&&i.ctrlKey||i.key==="c"&&i.ctrlKey||i.key==="v"&&i.ctrlKey||i.key==="x"&&i.ctrlKey||isNaN(Number(i.key))&&i.preventDefault()};ue("parent");let m=z(!1);const d=async()=>{try{console.log(c.modelValue.start_amount),console.log(c.modelValue.maximum_amount),m=!0;const i=await N.put("/api/vehicle/update",c.modelValue);g.value=!1,k("vehicle-saved"),console.log("Save successful"),m=!1}catch(i){console.error("Save failed",i)}};return(i,f)=>{const v=ne("CardDescription");return r(),A(t(re),{class:S(["mt-1 mb-3 w-full",e.modelValue.status=="highest"||e.modelValue.status=="active"?"border-green-500":e.modelValue.status=="Outbidded"?"border-amber-500":"border-red-500"])},{default:l(()=>[o(t(de),null,{default:l(()=>[o(t(ce),{class:S(e.modelValue.status=="highest"||e.modelValue.status=="active"?"text-green-500":e.modelValue.status=="Outbidded"?"text-amber-500":"text-red-500")},{default:l(()=>[b($(`${e.modelValue.id} (${e.modelValue.status})`),1)]),_:1},8,["class"]),o(v,{class:S(e.modelValue.current_bid_status=="Highest"||e.modelValue.current_bid_status=="highest"?"text-green-500":e.modelValue.current_bid_status=="Outbidded"||e.modelValue.current_bid_status=="outbidded"?"text-amber-500":"text-red-500")},{default:l(()=>[b($("Current Bid: ")+" "+$(e.modelValue.current_bid<1||e.modelValue.bids.length<1?"None ":t(u)(e.modelValue.current_bid))+" "+$(` - ${e.modelValue.current_bid_status} - ${h.value}`),1)]),_:1},8,["class"])]),_:1}),o(t(me),{class:"flex flex-col justify-center"},{default:l(()=>[o(t(C),{class:"w-full"},{default:l(()=>[n("div",Yt,[n("div",Zt,$(`Start Amount: ${t(u)(e.modelValue.start_amount)}`),1),e.isAuctionConfigurable?(r(),y("input",{key:0,type:"number",onKeydown:s,value:e.modelValue.start_amount,onInput:f[0]||(f[0]=p=>a(p.target.value,"start_amount")),placeholder:"4,000",class:"w-full rounded-md border border-gray-300 px-2 py-1 pl-7 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500"},null,40,Gt)):_("",!0)])]),_:1}),o(t(C),{class:"w-full"},{default:l(()=>[n("div",Jt,[n("div",Qt,$(`Maximum Amount: ${t(u)(e.modelValue.maximum_amount)}`),1),e.isAuctionConfigurable?(r(),y("input",{key:0,type:"number",onKeydown:s,value:e.modelValue.maximum_amount,onInput:f[1]||(f[1]=p=>a(p.target.value,"maximum_amount")),placeholder:"4,000",class:"w-full rounded-md border border-gray-300 px-2 py-1 pl-7 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500"},null,40,Wt)):_("",!0)])]),_:1}),e.isAuctionConfigurable?_("",!0):(r(),A(t(C),{key:0,class:"w-full"},{default:l(()=>[n("div",Xt,$(e.modelValue.bids.length),1)]),_:1})),o(t(C),{class:"w-full"},{default:l(()=>[n("div",es,[n("div",ts,$(`Lazy Increment: ${t(u)(e.modelValue.lazy_stage_increment)}`),1),e.isAuctionConfigurable?(r(),y("input",{key:0,type:"number",onKeydown:s,value:e.modelValue.lazy_stage_increment,onInput:f[2]||(f[2]=p=>a(p.target.value,"lazy_stage_increment")),placeholder:"4,000",class:"w-full rounded-md border border-gray-300 px-2 py-1 pl-7 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500"},null,40,ss)):_("",!0)])]),_:1}),o(t(C),{class:"w-full"},{default:l(()=>[n("div",as,[n("div",ls,$(`Aggressive Increment: ${t(u)(e.modelValue.aggressive_stage_increment)}`),1),e.isAuctionConfigurable?(r(),y("input",{key:0,type:"number",onKeydown:s,value:e.modelValue.aggressive_stage_increment,onInput:f[3]||(f[3]=p=>a(p.target.value,"aggressive_stage_increment")),placeholder:"4,000",class:"w-full rounded-md border border-gray-300 px-2 py-1 pl-7 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500"},null,40,is)):_("",!0)])]),_:1}),o(t(C),{class:"w-full"},{default:l(()=>[n("div",ns,[n("div",os,$(`Sniping Increment: ${t(u)(e.modelValue.sniping_stage_increment)}`),1),e.isAuctionConfigurable?(r(),y("input",{key:0,type:"number",onKeydown:s,value:e.modelValue.sniping_stage_increment,onInput:f[4]||(f[4]=p=>a(p.target.value,"sniping_stage_increment")),placeholder:"4,000",class:"w-full rounded-md border border-gray-300 px-2 py-1 pl-7 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500"},null,40,us)):_("",!0)])]),_:1})]),_:1}),o(t(ge),{class:"flex justify-between px-6 pb-6"},{default:l(()=>[e.isAuctionConfigurable?(r(),A(t(E),{key:0,class:S(["cursor-pointer",g.value&&e.modelValue.status!="active"?"bg-green-500":""]),onClick:d},{default:l(()=>[t(m)?(r(),y("div",ds,f[6]||(f[6]=[n("svg",{class:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[n("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),n("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),n("span",null,"Saving",-1)]))):(r(),y("div",rs,"Save"))]),_:1},8,["class"])):_("",!0),e.isAuctionConfigurable?(r(),A(t(E),{key:1,class:"cursor-pointer bg-red-500 text-white",onClick:f[5]||(f[5]=p=>x(e.modelValue.id))},{default:l(()=>f[7]||(f[7]=[b(" Drop Off ")])),_:1})):_("",!0),o(_e,{vehicleName:e.modelValue.name,vehicleId:e.modelValue.id},null,8,["vehicleName","vehicleId"])]),_:1})]),_:1},8,["class"])}}}),ms={class:"block md:hidden p-2"},gs=D({__name:"VehiclesTable",props:{vehicles:{type:Object,required:!0,default:()=>[]},isAuctionConfigurable:{type:Boolean,required:!0,default:()=>!1},activeStage:{type:Object,required:!0,default:()=>({name:"none"})}},emits:["update-vehicle","update-vehicle-in-DB","vehicle-saved"],setup(e,{emit:w}){const u=w,c=(k,g)=>{u("update-vehicle",k,g)},h=()=>{u("update-vehicle-in-DB")},x=()=>{u("vehicle-saved")};return(k,g)=>(r(),y("div",null,[o(t(W),{class:"hidden md:table w-full"},{default:l(()=>[o(t(X),null,{default:l(()=>g[0]||(g[0]=[b("A list of vehicles in the auction.")])),_:1}),o(t(ee),null,{default:l(()=>[o(t(O),null,{default:l(()=>{var a,s,m;return[o(t(T),null,{default:l(()=>g[1]||(g[1]=[b("Name")])),_:1}),o(t(T),null,{default:l(()=>g[2]||(g[2]=[b("Start Amount")])),_:1}),o(t(T),null,{default:l(()=>g[3]||(g[3]=[b("Maximum Amount")])),_:1}),e.isAuctionConfigurable?_("",!0):(r(),A(t(T),{key:0},{default:l(()=>g[4]||(g[4]=[b("Total Bids")])),_:1})),o(t(T),null,{default:l(()=>[b($(e.isAuctionConfigurable?"Current Bid":"Final Bid"),1)]),_:1}),o(t(T),null,{default:l(()=>g[5]||(g[5]=[b("Status")])),_:1}),o(t(T),{class:S(((a=e.activeStage)==null?void 0:a.name)=="lazy"?"bg-green-500 text-black":"")},{default:l(()=>g[6]||(g[6]=[b("Lazy Stage Increment")])),_:1},8,["class"]),o(t(T),{class:S(((s=e.activeStage)==null?void 0:s.name)=="aggressive"?"bg-amber-500 text-black":"")},{default:l(()=>g[7]||(g[7]=[b("Aggressive Stage Increment")])),_:1},8,["class"]),o(t(T),{class:S(((m=e.activeStage)==null?void 0:m.name)=="sniping"?"bg-red-500 text-black":"")},{default:l(()=>g[8]||(g[8]=[b("Sniping Stage Increment")])),_:1},8,["class"]),o(t(T),null,{default:l(()=>g[9]||(g[9]=[b("Actions")])),_:1})]}),_:1})]),_:1}),o(t(te),{class:"max-h-[80vh] min-h-[80vh] overflow-y-auto"},{default:l(()=>[(r(!0),y(j,null,K(k.$props.vehicles,(a,s)=>(r(),A(Rt,{key:s,modelValue:a,index:s,"onUpdate:modelValue":c,"onUpdate:vehicleInDb":h,onVehicleSaved:x,isAuctionConfigurable:e.isAuctionConfigurable},null,8,["modelValue","index","isAuctionConfigurable"]))),128))]),_:1})]),_:1}),n("div",ms,[(r(!0),y(j,null,K(k.$props.vehicles,(a,s)=>(r(),A(cs,{key:s,modelValue:a,index:s,"onUpdate:modelValue":c,"onUpdate:vehicleInDb":h,onVehicleSaved:x,isAuctionConfigurable:e.isAuctionConfigurable},null,8,["modelValue","index","isAuctionConfigurable"]))),128))])]))}}),fs={class:"border-sidebar-border/70 dark:border-sidebar-border flex-1 rounded-xl border"},vs={class:"text-3rem p-4 text-2xl font-bold tracking-tight sm:text-3xl"},bs={class:"text2rem p-4 text-xl tracking-tight"},ps={class:"flex w-full justify-center p-4"},ys={key:0,class:"flex w-full justify-center p-4"},_s={key:1,class:"flex w-full justify-center p-4"},hs={class:""},xs=D({__name:"AuctionConfigurationSection",emits:["initialization:started"],setup(e,{expose:w,emit:u}){const c=z({start_time:"11:00:00",end_time:"13:00:00",vehicles:[]}),h=z([]),x=p=>({lazy_stage:p.find(V=>V.name==="lazy"),aggressive_stage:p.find(V=>V.name==="aggressive"),sniping_stage:p.find(V=>V.name==="sniping")}),k=u,g=p=>{k("initialization:started",p)};let a=z(!1);const s=async()=>{try{const q=window.location.pathname.split("/")[2].replaceAll("-"," ").split(" ");q[2]=`${q[2]},`;const P=q.join(" "),B=await N.get(`/api/auction/${P}`);c.value={...B.data,vehicles:B.data.vehicles||[]},h.value=c.value.bid_stages,console.log(c),a=!0}catch(p){console.log(p)}},m=({stageName:p,field:V,value:I})=>{const M=h.value.findIndex(q=>q.name===p);M!==-1&&(h.value[M][V]=I,x(h.value))};H(()=>{[".bid.created",".account.testresults"].forEach(V=>{window.Echo.channel("public-channel").listen(V,I=>{s()})}),setTimeout(()=>{s()},0)});const d=(p,V)=>{c.value.vehicles[V]=p},i=async()=>{try{const p=await N.put(`/api/auction/${c.value.id}/vehicles`,{vehicles:c.value.vehicles});console.log("Save successful",p.data)}catch(p){console.error("Save failed",p)}},f=async()=>{await N.post("/api/auction/bid_stages/update",h.value),await s(),await console.log(h.value)};w({saveAllVehicles:i});function v(p){const V=new Date(p+"T00:00:00Z"),I=new Date,M=Date.UTC(I.getFullYear(),I.getMonth(),I.getDate());return V.getTime()==M}return(p,V)=>{var I;return r(),y("div",fs,[n("h2",vs,$(c.value.title),1),n("h3",bs,$(c.value.status),1),n("div",ps,[v(c.value.date)?(r(),A(gt,{key:0,disabled:"",stage:(I=c.value.bid_stage)==null?void 0:I.name,name:"Progress",startTime:c.value.start_time,endTime:c.value.end_time},null,8,["stage","startTime","endTime"])):_("",!0)]),v(c.value.date)?(r(),y("div",ys,[o(ut,{phillips_accounts_emails:c.value.phillips_accounts_emails,auction_id:c.value.id,auction_status:c.value.status,"onInitialization:started":g},null,8,["phillips_accounts_emails","auction_id","auction_status"])])):_("",!0),v(c.value.date)?(r(),y("div",_s,[t(a)?(r(),A(it,{key:0,stages:x(h.value),isAuctionConfigurable:c.value.status=="unconfigured","onUpdate:time":m,"onSave:time":f,onVehicleSaved:s},null,8,["stages","isAuctionConfigurable"])):_("",!0)])):_("",!0),n("div",hs,[o(gs,{activeStage:c.value.bid_stage,vehicles:c.value.vehicles,onUpdateVehicle:d,onUpdateVehicleInDB:s,isAuctionConfigurable:v(c.value.date)&&(c.value.status=="configured"||c.value.status=="active")},null,8,["activeStage","vehicles","isAuctionConfigurable"])])])}}}),ws=D({__name:"Alert",props:{class:{},variant:{}},setup(e){const w=e;return(u,c)=>(r(),y("div",{"data-slot":"alert",class:S(t(Z)(t(Vs)({variant:u.variant}),w.class)),role:"alert"},[Y(u.$slots,"default")],2))}}),$s=D({__name:"AlertDescription",props:{class:{}},setup(e){const w=e;return(u,c)=>(r(),y("div",{"data-slot":"alert-description",class:S(t(Z)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",w.class))},[Y(u.$slots,"default")],2))}}),ks=D({__name:"AlertTitle",props:{class:{}},setup(e){const w=e;return(u,c)=>(r(),y("div",{"data-slot":"alert-title",class:S(t(Z)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",w.class))},[Y(u.$slots,"default")],2))}}),Vs=we("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}}),Ss={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},As={key:0,cx:"12",cy:"12",r:"11",stroke:"#10B981","stroke-width":"2",fill:"none"},Cs={key:1,d:"M16 8L8 16",stroke:"#10B981","stroke-width":"2","stroke-linecap":"round"},Is={key:2,d:"M8 8L16 16",stroke:"#10B981","stroke-width":"2","stroke-linecap":"round"},Ts={key:3,cx:"12",cy:"12",r:"11",stroke:"#EF4444","stroke-width":"2",fill:"none"},zs={key:4,d:"M16 8L8 16",stroke:"#EF4444","stroke-width":"2","stroke-linecap":"round"},Bs={key:5,d:"M8 8L16 16",stroke:"#EF4444","stroke-width":"2","stroke-linecap":"round"},Ds={key:6,cx:"12",cy:"12",r:"11",stroke:"#F59E0B","stroke-width":"2",fill:"none"},Ms={key:7,d:"M16 8L8 16",stroke:"#F59E0B","stroke-width":"2","stroke-linecap":"round"},Ns={key:8,d:"M8 8L16 16",stroke:"#F59E0B","stroke-width":"2","stroke-linecap":"round"},qs=D({__name:"Alert",props:{id:{type:Number,required:!0},type:{type:String,required:!0,default:()=>"success"},title:{type:String,required:!0},description:{type:String,required:!0},time:{type:String,requied:!0}},emits:["dismiss"],setup(e,{emit:w}){const u=e,c=w,h=()=>{c("dismiss",u.id)};return(x,k)=>(r(),A(t(ws),{class:S(["md:w-150 border p-4",u.type=="success"?"border-green-500 text-green-500":u.type=="fail"?"border-red-500 text-red-500":u.type=="amber"?"border-amber-500 text-amber-500":"border-blue-500 text-blue-500"])},{default:l(()=>[n("div",{class:"absolute top-1 right-1 cursor-pointer",onClick:h},[(r(),y("svg",Ss,[u.type=="success"?(r(),y("circle",As)):_("",!0),u.type=="success"?(r(),y("path",Cs)):_("",!0),u.type=="success"?(r(),y("path",Is)):_("",!0),u.type=="fail"?(r(),y("circle",Ts)):_("",!0),u.type=="fail"?(r(),y("path",zs)):_("",!0),u.type=="fail"?(r(),y("path",Bs)):_("",!0),u.type=="amber"?(r(),y("circle",Ds)):_("",!0),u.type=="amber"?(r(),y("path",Ms)):_("",!0),u.type=="amber"?(r(),y("path",Ns)):_("",!0)]))]),o(t(ks),null,{default:l(()=>[b($(u.title),1)]),_:1}),o(t($s),null,{default:l(()=>[n("p",null,[n("span",{class:S(u.type=="success"?"text-green-500":u.type=="fail"?"text-red-500":u.type=="amber"?"text-amber-500":"text-blue-500")}," ["+$(u.time)+"] ",3),b(" "+$(" "+u.description),1)])]),_:1})]),_:1},8,["class"]))}}),Ps={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Es={class:"pointer-events-none fixed inset-0 z-50"},Fs={class:"fixed right-4 bottom-4 flex flex-col items-end space-y-2"},Gs=D({__name:"Auction",setup(e){const w=[{title:"Auction",href:"/auction"}],u=z([]),c=()=>{const s=new Audio("/sounds/success_beep.mp3");s.currentTime=0,s.play()},h=()=>{const s=new Audio("/sounds/failure_beep.mp3");s.currentTime=0,s.play()},x=()=>{const s=new Audio("/sounds/notification_beep.mp3");s.currentTime=0,s.play()};let k;const g=s=>{u.value=u.value.filter(m=>m.id!==s)};H(()=>{[".bid.created",".account.testresults"].forEach(m=>{window.Echo.channel("public-channel").listen(m,d=>{d.type=="success"?c():d.type=="fail"?h():x();const i={id:d.id,type:d.type,title:d.title,description:d.description,time:d.time};u.value.unshift(i),setTimeout(()=>{g(i.id)},9e4)})})}),he(()=>{clearInterval(k)});const a=s=>{u.value.unshift(s),setTimeout(()=>{g(s.id)},9e4)};return(s,m)=>(r(),y(j,null,[o(t(xe),{title:"Auction"}),o(Ce,{breadcrumbs:w},{default:l(()=>[n("div",Ps,[n("div",null,[n("div",Es,[n("div",Fs,[(r(!0),y(j,null,K(u.value,d=>(r(),A(qs,{key:d.id,type:d.type,title:d.title,description:d.description,time:d.time,id:d.id,onDismiss:i=>g(d.id),class:"pointer-events-auto"},null,8,["type","title","description","time","id","onDismiss"]))),128))])]),o(xs,{"onInitialization:started":a}),o(ye)])])]),_:1})],64))}});export{Gs as default};
